{% extends 'manager/manager_base.html' %}
{% load static %}
{% block script_extends_head %}
<script src="{% static 'assets/js/echarts.min.js' %}"></script>
<script>

    var low_heat_total = {{ low_heat_total | safe }};
    var high_heat_total = {{ high_heat_total | safe }};
    var heat_supply_days = {{ heat_supply_days | safe }};
    var heat_time_period = {{ heat_time_period | safe }};
    var kamba_system_cop_time = {{ kamba_system_cop_time | safe }};
    var kamba_system_cop = {{ kamba_system_cop | safe }};
    var target_minimum = {{ target_minimum | safe }};
    var low_threshold = {{ low_threshold | safe }};
    var max_cop = {{ max_cop|safe }};
    var kamba_wshp_cop_time = {{ kamba_wshp_cop_time|safe }};
    var kamba_wshp_cop = {{ kamba_wshp_cop|safe }};
    var last_week_solar_collector_time = {{ last_week_solar_collector_time|safe }};
    var last_week_solar_collector = {{ last_week_solar_collector|safe }};

    var water_replishment_time = {{ water_replishment_time|safe }};
    var heat_water_replenishment = {{ heat_water_replenishment|safe }};
    var heat_water_replenishment_limit = {{ heat_water_replenishment_limit|safe }};
    var heat_storage_tank_replenishment = {{ heat_storage_tank_replenishment|safe }};
    var solar_side_replenishment = {{ solar_side_replenishment|safe }};
    var solar_matrix_replenishment_limit = {{ solar_matrix_replenishment_limit|safe }};

    var solar_matrix_supply_and_return_time = {{ solar_matrix_supply_and_return_time|safe }};
    var solar_matrix_supply_water_temp = {{ solar_matrix_supply_water_temp|safe }};
    var solar_matrix_return_water_temp = {{ solar_matrix_return_water_temp|safe }};

    var last_week_solar_collector_by_days_time = {{ last_week_solar_collector_by_days_time|safe }};
    var last_week_solar_collector_by_days_available_solar = {{ last_week_solar_collector_by_days_available_solar|safe }};
    var last_week_solar_collector_by_days_solar_collector_heat = {{ last_week_solar_collector_by_days_solar_collector_heat|safe }};
    var last_week_solar_collector_by_days_solar_collector_efficiency = {{ last_week_solar_collector_by_days_solar_collector_efficiency|safe }};
    var last_week_solar_collector_by_days_solar_heating_guarantee_rate = {{ last_week_solar_collector_by_days_solar_heating_guarantee_rate|safe }};


    var load_by_days_time = {{ load_by_days_time|safe }};
    var max_load_by_days = {{ max_load_by_days|safe }};
    var min_load_by_days = {{ min_load_by_days|safe }};
    var avg_load_by_days = {{ avg_load_by_days|safe }};

    var end_supply_and_return_water_temp_time_data = {{ end_supply_and_return_water_temp_time_data|safe }};
    var end_supply_water_temp = {{ end_supply_water_temp|safe }};
    var end_return_water_temp = {{ end_return_water_temp|safe }};
    var end_supply_and_return_water_temp_diff = {{ end_supply_and_return_water_temp_diff|safe }};
    var end_supply_and_return_water_temp_diff_with_temp = {{ end_supply_and_return_water_temp_diff_with_temp|safe }};
    var supply_water_temp_with_temp = {{ supply_water_temp_with_temp|safe }};
    var return_water_temp_with_temp = {{ return_water_temp_with_temp|safe }};

    var calories_time_data = {{ calories_time_data|safe }};
    var high_temperature_plate_exchange_heat = {{ high_temperature_plate_exchange_heat|safe }};
    var wshp_heat = {{ wshp_heat|safe }};
    var rate_time = {{ rate_time|safe }};
    var high_temperature_plate_exchange_heat_rate = {{ high_temperature_plate_exchange_heat_rate|safe }};

    var cost_time = {{ cost_time|safe }};
    var cost_saving = {{ cost_saving|safe }};
    var power_consumption = {{ power_consumption|safe }};

    var last_year_end_supply_water_temp = {{ last_year_end_supply_water_temp|safe }};
    var last_year_end_return_water_temp = {{ last_year_end_return_water_temp|safe }};
    var last_year_end_supply_and_return_water_temp_diff = {{ last_year_end_supply_and_return_water_temp_diff|safe }};


</script>
{% endblock %}


{% block title_header %}
<div class="header">
    <h1 class="page-header">
        整体数据一览
    </h1>
    <ol class="breadcrumb">
        <li><a href="#">Home</a></li>
        <li><a href="#">Dashboard</a></li>
        <li class="active">Kamba</li>
    </ol>
</div>
{% endblock %}
{% block content %}

<div class="dashboard-cards">
    <div class="row">
        <div class="col-xs-12 col-sm-6 col-md-4">

            <div class="card horizontal cardIcon waves-effect waves-dark">
                <div class="card-image orange">
                    <i class="material-icons dp48">equalizerkWh</i>
                </div>
                <div class="card-stacked orange">
                    <div class="card-content">
                        <h3>{{max_load}} kW</h3>
                    </div>
                    <div class="card-action">
                        <strong>上周最大负荷</strong>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xs-12 col-sm-6 col-md-4">

            <div class="card horizontal cardIcon waves-effect waves-dark">
                <div class="card-image green">
                    <i class="material-icons dp48">equalizer</i>
                </div>
                <div class="card-stacked green">
                    <div class="card-content">
                        <h3>{{min_load}} kW</h3>
                    </div>
                    <div class="card-action">
                        <strong>上周最小负荷</strong>
                    </div>
                </div>
            </div>

        </div>
        <div class="col-xs-12 col-sm-6 col-md-4">

            <div class="card horizontal cardIcon waves-effect waves-dark">
                <div class="card-image blue">
                    <i class="material-icons dp48">equalizer</i>
                </div>
                <div class="card-stacked blue">
                    <div class="card-content">
                        <h3>{{cost_saving_total}}元</h3>
                    </div>
                    <div class="card-action">
                        <strong>上月节省供暖总费用</strong>
                    </div>
                </div>
            </div>

        </div>

    </div>
</div>

<div class="row">
    <div class="col-xs-12 col-sm-12 col-md-6">
        <div class="row">
            <div class="col-xs-12">
                <div class="card">
                    <div class="card-image donutpad">
                        <div id="pool_available_heat" style="width:100%;height:400px"></div>
                    </div>
                    <div class="card-action">
                        <b>蓄热水池分时可用低温/高温热量 （{{heat_date}}）</b>
                    </div>
                </div>
            </div>
        </div>
    </div><!--/.row-->

    <div class="col-xs-12 col-sm-12 col-md-6">
        <div class="row">
            <div class="col-xs-12">
                <div class="card">
                    <div class="card-image donutpad">
                        <div id="high_heat_equal_supply_days" style="width:100%;height:400px"></div>
                    </div>
                    <div class="card-action">
                        <b>蓄热水池可用高温热量及电锅炉替换供热天数（{{heat_date}}）</b>
                    </div>
                </div>
            </div>
        </div>
    </div><!--/.row-->
</div>

<div class="row">
    <div class="col-xs-12 col-sm-12 col-md-4">
        <div class="card">
            <div class="card-image">
                <div id="kamba_system_cop_pie" style="width:100%;height:300px"></div>
            </div>
            <div class="card-action">
                <b>系统综合COP</b>
            </div>
        </div>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-8">
        <div class="card">
            <div class="card-image">
                <div id="kamba_system_cop_chart" style="width:100%;height:300px"></div>
            </div>
            <div class="card-action">
                <b>系统综合能效比</b>
            </div>
        </div>
    </div><!--/.row-->
</div>

<div class="row">
    <div class="col-xs-12 col-sm-12 col-md-4">
        <div class="card">
            <div class="card-image">
                <div id="kamba_wshp_cop_pie" style="width:100%;height:300px"></div>
            </div>
            <div class="card-action">
                <b>水源热泵COP</b>
            </div>
        </div>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-8">
        <div class="card">
            <div class="card-image">
                <div id="kamba_wshp_cop_chart" style="width:100%;height:300px"></div>
            </div>
            <div class="card-action">
                <b>水源热泵能效比</b>
            </div>
        </div>
    </div><!--/.row-->
</div>


<div class="row">
    <div class="col-xs-12 col-sm-12 col-md-12">
        <div class="card">

            <div class="card-action">
                水池温度情况（{{heat_date}}）
            </div>

            <div class="card-content">
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th style="text-align:center;vertical-align:middle;" rowspan="2">NO</th>
                                <th style="text-align:center;vertical-align:middle;" rowspan="2">深度（m）</th>
                                <th style="text-align:center;vertical-align:middle;" rowspan="2">体积（m³）</th>
                                <th style="text-align:center;vertical-align:middle;" colspan="6">水池温度（℃）</th>
                            </tr>
                            <tr>
                                <th style="text-align:center;vertical-align:middle;">0-4时</th>
                                <th style="text-align:center;vertical-align:middle;">4-8时</th>
                                <th style="text-align:center;vertical-align:middle;">8-12时</th>
                                <th style="text-align:center;vertical-align:middle;">12-16时</th>
                                <th style="text-align:center;vertical-align:middle;">16-20时</th>
                                <th style="text-align:center;vertical-align:middle;">20-24时</th>
                            </tr>
                        </thead>

                        <tbody>
                        {% for data in pool_temperature %}
                            {% if forloop.counter|divisibleby:2 %}
                                <tr class="info">
                                    <td style="text-align:center;vertical-align:middle;">{{data.0}}</td>
                                    <td style="text-align:center;vertical-align:middle;">{{data.1}}</td>
                                    <td style="text-align:center;vertical-align:middle;">{{data.2}}</td>
                                    <td style="text-align:center;vertical-align:middle;">{{data.3}}</td>
                                    <td style="text-align:center;vertical-align:middle;">{{data.4}}</td>
                                    <td style="text-align:center;vertical-align:middle;">{{data.5}}</td>
                                    <td style="text-align:center;vertical-align:middle;">{{data.6}}</td>
                                    <td style="text-align:center;vertical-align:middle;">{{data.7}}</td>
                                    <td style="text-align:center;vertical-align:middle;">{{data.8}}</td>
                                    <!--                                        <td>@mdo</td>-->
                                </tr>

                            {% else %}
                                <tr class="success">
                                    <td style="text-align:center;vertical-align:middle;">{{data.0}}</td>
                                    <td style="text-align:center;vertical-align:middle;">{{data.1}}</td>
                                    <td style="text-align:center;vertical-align:middle;">{{data.2}}</td>
                                    <td style="text-align:center;vertical-align:middle;">{{data.3}}</td>
                                    <td style="text-align:center;vertical-align:middle;">{{data.4}}</td>
                                    <td style="text-align:center;vertical-align:middle;">{{data.5}}</td>
                                    <td style="text-align:center;vertical-align:middle;">{{data.6}}</td>
                                    <td style="text-align:center;vertical-align:middle;">{{data.7}}</td>
                                    <td style="text-align:center;vertical-align:middle;">{{data.8}}</td>
                                    <!--                                        <td>@fat</td>-->
                                </tr>
                            {% endif %}
                        {% endfor %}


                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">

    <div class="col-xs-12 col-sm-12 col-md-12">
        <div class="cirStats">
            <div class="row">
                <div class="col-xs-12 col-sm-6 col-md-6">
                    <div class="card">
                        <div class="card-image donutpad">
                            <div id="last_week_solar_collector" style="width: 100%;height:300px"></div>
                        </div>
<!--                        <div class="card-action">-->
<!--                            <b>Donut Chart Example</b>-->
<!--                        </div>-->
                    </div>
                </div>
                <div class="col-xs-12 col-sm-6 col-md-6">
                    <div class="card">
                        <div class="card-image donutpad">
                            <div id="last_week_heat_storage_replenishment" style="width: 100%;height:300px"></div>
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </div><!--/.row-->
</div>

<div class="row">

    <div class="col-xs-12 col-sm-12 col-md-12">
        <div class="cirStats">
            <div class="row">
                <div class="col-xs-12 col-sm-6 col-md-6">
                    <div class="card">
                        <div class="card-image donutpad">
                            <div id="last_week_heat_water_replenishment" style="width: 100%;height:300px"></div>
                        </div>
<!--                        <div class="card-action">-->
<!--                            <b>Donut Chart Example</b>-->
<!--                        </div>-->
                    </div>
                </div>
                <div class="col-xs-12 col-sm-6 col-md-6">
                    <div class="card">
                        <div class="card-image donutpad">
                            <div id="last_week_solar_side_replenishment" style="width: 100%;height:300px"></div>
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </div><!--/.row-->
</div>

<div class="row">
    <div class="col-xs-12">
        <div class="card">
            <div class="card-image">
                <div id="solar_matrix_supply_and_return_water_temp" style="width:100%;height:400px"></div>
            </div>
            <div class="card-action">
                <b>过去一周太阳能矩阵供回水温度</b>
            </div>
        </div>
    </div>

</div>

<div class="row">
    <div class="col-xs-12 col-sm-12 col-md-7">
        <div class="card">
            <div class="card-image">
                <div id="load_by_days" style="width:100%;height:300px"></div>
            </div>
            <div class="card-action">
                <b>上周负荷情况</b>
            </div>
        </div>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-5">
        <div class="card">
            <div class="card-image">
                <div id="supply_and_return_water_temp_diff_with_temp" style="width:100%;height:300px"></div>
            </div>
            <div class="card-action">
                <b>末端供回水温差与气温关系</b>
            </div>
        </div>
    </div><!--/.row-->
</div>
<div class="row">
    <div class="col-xs-12 col-sm-12 col-md-6">
        <div class="card">
            <div class="card-image">
                <div id="supply_water_temp_with_temp" style="width:100%;height:300px"></div>
            </div>
            <div class="card-action">
                <b>末端供水温度与气温关系</b>
            </div>
        </div>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-6">
        <div class="card">
            <div class="card-image">
                <div id="return_water_temp_with_temp" style="width:100%;height:300px"></div>
            </div>
            <div class="card-action">
                <b>末端回水温度与气温关系</b>
            </div>
        </div>
    </div><!--/.row-->
</div>

<div class="row">
    <div class="col-xs-12">
        <div class="card">
            <div class="card-image">
                <div id="last_year_supply_return_water_temp" style="width:100%;height:600px"></div>
            </div>
            <div class="card-action">
                <b>过去一年供回水温度温差分析({{last_year_start}}——{{last_year_end}})</b>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-xs-12">
        <div class="card">
            <div class="card-image">
                <div id="last_week_solar_collector_by_days" style="width:100%;height:400px"></div>
            </div>
            <div class="card-action">
                <b>过去一周太阳能集热分析</b>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-xs-12 col-sm-12 col-md-6">
        <div class="card">
            <div class="card-image">
                <div id="calories_by_days" style="width:100%;height:300px"></div>
            </div>
            <div class="card-action">
                <b>制热量情况</b>
            </div>
        </div>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-6">
        <div class="card">
            <div class="card-image">
                <div id="power_rate" style="width:100%;height:300px"></div>
            </div>
            <div class="card-action">
                <b>高温板换制热功率</b>
            </div>
        </div>
    </div><!--/.row-->
</div>

<div class="row">
    <div class="col-xs-12">
        <div class="card">
            <div class="card-image">
                <div id="cost_saving" style="width:100%;height:400px"></div>
            </div>
            <div class="card-action">
                <b>上月耗电与节省电费情况</b>
            </div>
        </div>
    </div>

</div>

<div class="row">
    <div class="col-xs-12">
        <div class="card">
            <div class="card-image">
                <div id="end_supply_and_return_water_temp" style="width:100%;height:400px"></div>
            </div>
            <div class="card-action">
                <b>末端平均供回水温度及温差</b>
            </div>
        </div>
    </div>

</div>

<div class="row">
    <div class="col-md-12">

    </div>
</div>
<!-- /. ROW  -->



{% endblock %}

{% block script_extends_tail %}
<script src="{% static 'assets/js/kamba/kamba.js' %}"></script>
{% endblock %}
